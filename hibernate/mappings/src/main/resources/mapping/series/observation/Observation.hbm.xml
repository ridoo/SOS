<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class abstract="true"
           name="org.n52.sos.ds.hibernate.entities.observation.series.AbstractSeriesObservation"
           table="observation">
        <id name="observationId"
            type="long">
            <generator class="assigned">
            </generator>
        </id>
        <discriminator formula="('NUMERIC_VALUE')" type="string"/>
        <many-to-one name="series"
                     class="org.n52.sos.ds.hibernate.entities.observation.series.Series"
                     fetch="select"
                     lazy="no-proxy"
                     foreign-key="observationSeriesFk" insert="false" update="false">
            <column index="obsSeriesIdx"
                    name="seriesId"
                    not-null="true">
           	</column>
        </many-to-one>
        <property name="phenomenonTimeStart"
                  type="iso_string" insert="false" update="false">
            <column index="obsPhenTimeStartIdx"
                    name="phenomenonTime"
                    length="29"
                    not-null="true">
            </column>
        </property>
        <property name="phenomenonTimeEnd"
                  type="iso_string" insert="false" update="false">
            <column index="obsPhenTimeEndIdx"
                    name="phenomenonTime"
                    length="29"
                    not-null="true">
            </column>
        </property>
        <property name="resultTime"
                  type="iso_string" insert="false" update="false">
            <column index="obsResultTimeIdx"
                    name="phenomenonTime"
                    length="29"
                    not-null="true">
            </column>
        </property>
        <property name="identifier"
                  type="string">
            <formula>null</formula>
        </property>
        <many-to-one name="codespace"
                     class="org.n52.sos.ds.hibernate.entities.Codespace"
                     fetch="select"
                     lazy="no-proxy"
                     foreign-key="obsCodespaceIdentifierFk">
            <formula>null</formula>
        </many-to-one>
        <property name="name"
                  type="string">
            <formula>null</formula>
        </property>
        <many-to-one name="codespaceName"
                     class="org.n52.sos.ds.hibernate.entities.Codespace"
                     fetch="select"
                     foreign-key="obsCodespaceNameFk">
            <formula>null</formula>
        </many-to-one>
        <property name="description"
                  type="string">
            <formula>null</formula>
        </property>
        <property name="deleted"
                  type="org.hibernate.type.TrueFalseType">
            <formula>'F'</formula>
        </property>
        <property name="child"
                  type="org.hibernate.type.TrueFalseType">
            <formula>'F'</formula>
        </property>
        <property name="parent"
                  type="org.hibernate.type.TrueFalseType">
            <formula>'F'</formula>
        </property>
        <property name="validTimeStart"
                  type="timestamp">
            <formula>null</formula>
        </property>
        <property name="validTimeEnd"
                  type="timestamp">
            <formula>null</formula>
        </property>
        <many-to-one name="unit"
                     class="org.n52.sos.ds.hibernate.entities.Unit"
                     fetch="select"
                     lazy="no-proxy"
                     foreign-key="observationUnitFk">
            <column name="seriesId"
                    not-null="false">
            </column>
        </many-to-one>
        <many-to-one name="offerings" class="org.n52.sos.ds.hibernate.entities.Offering" fetch="select" lazy="no-proxy" foreign-key="observationOfferingFk" insert="false" update="false">
        	<column name="offeringId" />
        </many-to-one>
        <property name="longitude" type="double">
           <column name="lon" unique-key="obsLonLatUk">
            	<comment>The longitude of the samplingGeometry. Optional</comment>
            </column>
        </property>
        <property name="latitude" type="double">
        	<column name="lat" unique-key="obsLonLatUk">
            	<comment>The latitude of the samplingGeometry. Optional</comment>
            </column>
        </property>
      <!-- <set name="parameters" subselect="(SELECT null::bigint as observationId null::bigint as parameterId" >
        <set name="parameters" table="parameters" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="observationId" not-null="true" />
            </key>
            <one-to-many class="org.n52.sos.ds.hibernate.entities.parameter.observation.Parameter" />
        </set>-->
        <!-- <set name="relatedObservations" table="relatedobservations" lazy="true" access="field" fetch="select" cascade="all">
	        <key>
	            <column name="observationId" not-null="true" index="relatedObsObsIdx" />
	        </key>
	        <one-to-many class="org.n52.sos.ds.hibernate.entities.observation.RelatedObservation" />
    	</set> -->
        <subclass name="org.n52.sos.ds.hibernate.entities.observation.series.full.SeriesNumericObservation"
                         extends="org.n52.sos.ds.hibernate.entities.observation.series.AbstractSeriesObservation"
                         discriminator-value="NUMERIC_VALUE">
            <property name="value" type="double" column="value" />
        </subclass>
    </class>
</hibernate-mapping>
